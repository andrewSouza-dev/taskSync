<%- include('../partials/menu', { user }) %>

<h2>Todas as Tarefas</h2>

<a href="/tasks/new">Criar Nova Tarefa</a>

<table border="1">
  <thead>
    <tr>
      <th>ID</th>
      <th>Título</th>
      <th>Status</th>
      <th>Ações</th>
    </tr>
  </thead>
  <tbody>
    <% if (tasks.length > 0) { %>
      <% tasks.forEach(task => { %>
        <tr>
          <td><%= task.id %></td>
          <td><%= task.title %></td>
          <td><%= task.status %></td>
          <td>
            <a href="/tasks/<%= task.id %>">Ver</a>
            <a href="/tasks/<%= task.id %>/edit">Editar</a>
            <form action="/tasks/<%= task.id %>?_method=DELETE" method="POST" style="display:inline;">
              <button type="submit">Excluir</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr><td colspan="4">Nenhuma tarefa encontrada.</td></tr>
    <% } %>
  </tbody>
</table>

<%- include('../partials/footer') %>
