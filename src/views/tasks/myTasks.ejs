<%- include('../partials/menu', { user }) %>


<h1>ğŸ“ Minhas Tarefas</h1>
<a href="/my-tasks/new" class="btn-primary btn-small-width">â• Nova Tarefa</a>

<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>TÃ­tulo</th>
      <th>Status</th>
      <th>AÃ§Ãµes</th>
    </tr>
  </thead>
  <tbody>
    <% if (tasks.length > 0) { %>
      <% tasks.forEach(t => { %>
        <tr>
          <td><%= t.task.id %></td>
          <td><%= t.task.title %></td>
          <td>
            <% if (t.task.status === 'PENDING') { %>
              <span class="badge bg-secondary">Pendente</span>
            <% } else if (t.task.status === 'RUNNING') { %>
              <span class="badge bg-info">Em andamento</span>
            <% } else if (t.task.status === 'COMPLETED') { %>
              <span class="badge bg-success">ConcluÃ­da</span>
            <% } else { %>
              <span class="badge bg-danger">Falhou</span>
            <% } %>
          </td>
          <td>
            <a href="/users/<%= user.id %>" class="btn-view">ğŸ‘ Ver</a> |
            <a href="/my-tasks/<%= t.task.id %>/edit" class="btn-sm btn-warning">âœï¸ Editar</a> |
            <form action="/my-tasks/<%= t.task.id %>?_method=DELETE" method="POST" style="display:inline;">
              <button class="btn-delete">ğŸ—‘ï¸ Deletar</button>
            </form>
          </td>
        </tr>
      <% }) %>
    <% } else { %>
      <tr><td colspan="4">Nenhuma tarefa encontrada</td></tr>
    <% } %>
  </tbody>
</table>

<%- include('../partials/footer') %>
